package com.zeroone_creative.basicapplication.controller.provider;import org.apache.http.client.CookieStore;import org.apache.http.impl.client.BasicCookieStore;import org.apache.http.impl.client.DefaultHttpClient;import android.app.ActivityManager;import android.content.Context;import com.android.volley.RequestQueue;import com.android.volley.toolbox.HttpClientStack;import com.android.volley.toolbox.HttpStack;import com.android.volley.toolbox.Volley;//RequestQueuesを管理するクラス。//シングルトン制御public class VolleyHelper{    public static final Object lock = new Object();        //private static RequestQueue requestQueue;    private static RequestQueue mRequestQueue;    private static CustomImageLoader mImageLoader;    private static CookieStore mCookieStore;        /**     * RequestQueueのシングルトン生成     * @param context アプリケーションコンテキスト     * @return     */    public static RequestQueue getRequestQueue(final Context context) {        synchronized (lock) {            if (mRequestQueue == null) {            	//TODO            	//resource from : http://stackoverflow.com/questions/16680701/using-cookies-with-android-volley-library            	DefaultHttpClient httpclient = new DefaultHttpClient();            	mCookieStore = new BasicCookieStore();            	httpclient.setCookieStore( mCookieStore );            	HttpStack httpStack = new HttpClientStack( httpclient );            	                mRequestQueue = Volley.newRequestQueue(context,httpStack);            }            return mRequestQueue;        }    }        public static CookieStore getCookieStore(){    	 synchronized (lock) {    		return mCookieStore;     	 }    }        public static void RequestCancell(Object tag){    	synchronized (lock) {            if (mRequestQueue != null) {                mRequestQueue.cancelAll(tag);            }        }    }        public static void RequestStart(){    	synchronized (lock) {            if (mRequestQueue != null) {                mRequestQueue.start();            }        }    }        public static void RequestStop(){    	synchronized (lock) {            if (mRequestQueue != null) {                mRequestQueue.stop();            }        }    }        public static CustomImageLoader getImageLoader(final Context context) {        if (mImageLoader == null) {            mImageLoader = new CustomImageLoader(getRequestQueue(context), new BitmapCache());        }        return mImageLoader;    }}